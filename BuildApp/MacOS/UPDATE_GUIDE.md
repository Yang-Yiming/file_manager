# åº”ç”¨ç¨‹åºæ›´æ–°æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•æ›´æ–°å’Œç»´æŠ¤æ–‡ä»¶ç®¡ç†å™¨åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬ä»£ç ä¿®æ”¹åçš„é‡æ–°æ„å»ºã€ç‰ˆæœ¬ç®¡ç†å’Œåˆ†å‘æµç¨‹ã€‚

## ğŸ”„ æ›´æ–°å·¥ä½œæµç¨‹

### å¿«é€Ÿæ›´æ–°ï¼ˆæ¨èï¼‰

å½“ä½ ä¿®æ”¹äº†ä»£ç å¹¶æƒ³è¦é‡æ–°æ‰“åŒ…åº”ç”¨ç¨‹åºæ—¶ï¼š

```bash
# ç®€å•é‡æ–°æ„å»º
./update_app.sh

# å¿«é€Ÿæ¨¡å¼ï¼ˆè·³è¿‡äº¤äº’ï¼‰
./update_app.sh --quick

# æ›´æ–°ç‰ˆæœ¬å·å¹¶æ„å»º
./update_app.sh --version 0.3.0
```

### æ‰‹åŠ¨æ›´æ–°æ­¥éª¤

1. **ä¿®æ”¹ä»£ç **
   - ç¼–è¾‘æºä»£ç æ–‡ä»¶
   - æµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸

2. **æ›´æ–°ç‰ˆæœ¬å·**ï¼ˆå¯é€‰ï¼‰
   ```bash
   # ç¼–è¾‘ Cargo.toml ä¸­çš„ç‰ˆæœ¬å·
   version = "0.3.0"
   ```

3. **é‡æ–°æ„å»º**
   ```bash
   ./build_app.sh  # å®Œæ•´æ„å»º
   # æˆ–è€…
   ./build.sh      # ç®€å•æ„å»º
   ```

## ğŸ·ï¸ ç‰ˆæœ¬ç®¡ç†

### ç‰ˆæœ¬å·è§„åˆ™

é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼ˆSemantic Versioningï¼‰ï¼š

- **ä¸»ç‰ˆæœ¬å·**ï¼šä¸å…¼å®¹çš„APIä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·**ï¼šå‘åå…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å·**ï¼šå‘åå…¼å®¹çš„é—®é¢˜ä¿®æ­£

ç¤ºä¾‹ï¼š`1.2.3`

### ç‰ˆæœ¬æ›´æ–°å‘½ä»¤

```bash
# ä¿®è®¢ç‰ˆæœ¬ï¼ˆbug ä¿®å¤ï¼‰
./update_app.sh --version 0.2.1

# æ¬¡ç‰ˆæœ¬ï¼ˆæ–°åŠŸèƒ½ï¼‰
./update_app.sh --version 0.3.0

# ä¸»ç‰ˆæœ¬ï¼ˆé‡å¤§æ›´æ”¹ï¼‰
./update_app.sh --version 1.0.0
```

## ğŸ“¦ æ„å»ºé€‰é¡¹

### æ„å»ºè„šæœ¬å¯¹æ¯”

| è„šæœ¬ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `build.sh` | ç®€å•å¿«é€Ÿ | æ—¥å¸¸å¼€å‘æµ‹è¯• |
| `build_app.sh` | åŠŸèƒ½å®Œæ•´ | æ­£å¼å‘å¸ƒ |
| `update_app.sh` | æ™ºèƒ½æ›´æ–° | ç»´æŠ¤æ›´æ–° |

### æ„å»ºå‚æ•°

```bash
# update_app.sh å‚æ•°
--version VERSION    # æ›´æ–°ç‰ˆæœ¬å·
--no-backup         # è·³è¿‡å¤‡ä»½
--quick             # å¿«é€Ÿæ¨¡å¼
--help              # æ˜¾ç¤ºå¸®åŠ©
```

## ğŸ”§ å¼€å‘å·¥ä½œæµç¨‹

### æ—¥å¸¸å¼€å‘

```bash
# 1. ä¿®æ”¹ä»£ç 
vim src/main.rs

# 2. å¿«é€Ÿæµ‹è¯•
cargo run

# 3. æ„å»ºåº”ç”¨ç¨‹åº
./update_app.sh --quick
```

### å‘å¸ƒå‡†å¤‡

```bash
# 1. ç¡®ä¿ä»£ç è´¨é‡
cargo test
cargo clippy

# 2. æ›´æ–°ç‰ˆæœ¬å¹¶æ„å»º
./update_app.sh --version 1.0.0

# 3. æµ‹è¯•åº”ç”¨ç¨‹åº
open FileManager.app

# 4. æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
git add .
git commit -m "Release v1.0.0"
git tag v1.0.0
```

## ğŸ“ æ–‡ä»¶ç»“æ„è¯´æ˜

```
file_manager/
â”œâ”€â”€ src/                    # æºä»£ç 
â”œâ”€â”€ res/                    # èµ„æºæ–‡ä»¶
â”œâ”€â”€ FileManager.app/        # æ„å»ºçš„åº”ç”¨ç¨‹åºåŒ…
â”œâ”€â”€ build.sh               # ç®€å•æ„å»ºè„šæœ¬
â”œâ”€â”€ build_app.sh           # å®Œæ•´æ„å»ºè„šæœ¬
â”œâ”€â”€ update_app.sh          # æ›´æ–°è„šæœ¬
â””â”€â”€ UPDATE_GUIDE.md        # æœ¬æŒ‡å—
```

## ğŸš€ éƒ¨ç½²é€‰é¡¹

### æœ¬åœ°ä½¿ç”¨

```bash
# ç›´æ¥è¿è¡Œ
open FileManager.app

# æˆ–åŒå‡» FileManager.app
```

### ç³»ç»Ÿå®‰è£…

```bash
# å¤åˆ¶åˆ° Applications æ–‡ä»¶å¤¹
cp -r FileManager.app /Applications/

# æˆ–ä½¿ç”¨æ›´æ–°è„šæœ¬çš„äº¤äº’é€‰é¡¹
./update_app.sh
# é€‰æ‹©é€‰é¡¹ 2ï¼šå¤åˆ¶åˆ° Applications æ–‡ä»¶å¤¹
```

### åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼

```bash
# åˆ›å»ºç¬¦å·é“¾æ¥åˆ°æ¡Œé¢
ln -sf "$(pwd)/FileManager.app" ~/Desktop/
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: åº”ç”¨ç¨‹åºæ— æ³•å¯åŠ¨**
```bash
# æ£€æŸ¥å¯æ‰§è¡Œæƒé™
chmod +x FileManager.app/Contents/MacOS/file_manager

# é‡æ–°æ„å»º
./update_app.sh --no-backup
```

**Q: ç‰ˆæœ¬å·æœªæ›´æ–°**
```bash
# æ£€æŸ¥ Cargo.toml ç‰ˆæœ¬å·
grep version Cargo.toml

# å¼ºåˆ¶æ›´æ–°ç‰ˆæœ¬
./update_app.sh --version NEW_VERSION
```

**Q: æ„å»ºå¤±è´¥**
```bash
# æ¸…ç†å¹¶é‡æ–°æ„å»º
cargo clean
./build_app.sh
```

### æ—¥å¿—å’Œè°ƒè¯•

```bash
# æŸ¥çœ‹æ„å»ºè¯¦ç»†ä¿¡æ¯
RUST_LOG=debug cargo build --release

# è¿è¡Œè°ƒè¯•ç‰ˆæœ¬
cargo run
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å‡å°åº”ç”¨ç¨‹åºå¤§å°

1. **å¯ç”¨é“¾æ¥æ—¶ä¼˜åŒ–**ï¼ˆå·²é…ç½®ï¼‰
   ```toml
   [profile.release]
   lto = "thin"
   strip = true
   ```

2. **ç§»é™¤è°ƒè¯•ä¿¡æ¯**ï¼ˆå·²é…ç½®ï¼‰
   ```toml
   [profile.release]
   debug = false
   ```

### åŠ å¿«æ„å»ºé€Ÿåº¦

```bash
# ä½¿ç”¨å¢é‡ç¼–è¯‘ï¼ˆå¼€å‘æ—¶ï¼‰
export CARGO_INCREMENTAL=1

# å¹¶è¡Œæ„å»º
cargo build --release -j $(nproc)
```

## ğŸ” å®‰å…¨æœ€ä½³å®è·µ

1. **ä»£ç ç­¾å**ï¼ˆmacOSï¼‰
   ```bash
   # å¦‚æœæœ‰å¼€å‘è€…è¯ä¹¦
   codesign --sign "Developer ID Application: Your Name" FileManager.app
   ```

2. **å…¬è¯**ï¼ˆmacOSåˆ†å‘ï¼‰
   ```bash
   # æäº¤å…¬è¯
   xcrun notarytool submit FileManager.app --keychain-profile "notarytool-password"
   ```

## ğŸ“ˆ ç‰ˆæœ¬å†å²ç¤ºä¾‹

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ”¹å†…å®¹ |
|------|------|----------|
| 0.1.0 | 2024-01-01 | åˆå§‹ç‰ˆæœ¬ |
| 0.2.0 | 2024-02-01 | æ·»åŠ æ–‡ä»¶æœç´¢åŠŸèƒ½ |
| 0.2.1 | 2024-02-15 | ä¿®å¤æœç´¢Bug |
| 0.3.0 | 2024-03-01 | æ·»åŠ ä¸»é¢˜æ”¯æŒ |

## ğŸ†˜ è·å–å¸®åŠ©

- æŸ¥çœ‹æ„å»ºè„šæœ¬å¸®åŠ©ï¼š`./update_app.sh --help`
- æ£€æŸ¥Rustæ–‡æ¡£ï¼š`cargo doc --open`
- æŸ¥çœ‹é¡¹ç›®ä¾èµ–ï¼š`cargo tree`

---

**æç¤º**ï¼šå»ºè®®åœ¨æ¯æ¬¡é‡è¦æ›´æ–°ååˆ›å»ºå¤‡ä»½ï¼Œæ›´æ–°è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†è¿™ä¸ªè¿‡ç¨‹ã€‚